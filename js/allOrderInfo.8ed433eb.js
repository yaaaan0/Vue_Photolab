(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["allOrderInfo"],{e81d:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"allOrderInfo"}},[s("v-app",[s("v-card",[s("v-banner",{attrs:{"single-line":"",color:"rgba(75, 69, 60,0.8)",dark:""}},[s("caption",[e._v("訂單編號 ｜ "+e._s(e.order._id))])]),s("v-card-text",{staticClass:"data text-1 grey lighten-4"},[s("v-sheet",{staticClass:"mx-auto",attrs:{"max-width":"800",height:"250"}},[s("span",[e._v("訂單日期 ｜ "+e._s(e.order.date))]),s("span",[e._v("拍攝項目 ｜ "+e._s(e.order.project))]),s("span",[e._v("預計拍攝日期 ｜ "+e._s(e.order.orderDate))]),s("span",[e._v("攝影師 ｜ "+e._s(e.order.photographer))]),s("span",[s("P",[e._v("付款狀態 ｜")]),!1===e.paid?s("v-switch",{attrs:{color:"rgb(103, 125, 53)",disabled:"",inset:"",dense:""}}):e._e(),!1===e.paid?s("div",{staticClass:"caption fail",attrs:{color:"#F44336"},on:{click:e.pay}},[e._v("*尚未付款")]):e._e(),!0===e.paid?s("v-switch",{attrs:{color:"rgb(103, 125, 53)","input-value":"true",disabled:"",inset:"",dense:""}}):e._e(),!0===e.paid?s("div",{staticClass:"caption success",on:{click:e.pay}},[e._v("*付款成功")]):e._e()],1)])],1),s("v-card-text",{staticClass:"text-2 grey lighten-4"},[s("v-sheet",{staticClass:"mx-auto x_auto",attrs:{id:"chatRecord","min-height":"300","max-width":"800","max-height":"500px"}},e._l(e.messages,(function(t,a){return s("div",[s("v-layout",{staticClass:"webmaster"},[t.user_account.includes("##")?e._e():s("v-textarea",{staticClass:"msg",attrs:{filled:"",dense:"",rounded:"","auto-grow":"",rows:"1",name:"input-7-1","prepend-icon":"mdi-account-circle",value:t.message,hint:t.date,prefix:t.user_name,"persistent-hint":"",readonly:"",color:"rgb(107 102 96)"}}),t.user_account.includes("##")?s("v-textarea",{staticClass:"msg_web",attrs:{"background-color":"rgba(255,255,255,0.4)",filled:"",dense:"",rounded:"","auto-grow":"",rows:"1",name:"input-7-1","append-outer-icon":"mdi-account-circle",value:t.message,hint:t.date,suffix:t.user_name,"persistent-hint":"",readonly:"",color:"rgb(107 102 96)"}}):e._e()],1)],1)})),0),s("div",{staticClass:"mt-10"},[s("v-text-field",{staticClass:"sendMessage",attrs:{label:"message","append-outer-icon":"mdi-send",filled:"",dense:"",rounded:"","auto-grow":"",rows:"1",color:"#677d35"},on:{"click:append-outer":e.sendMessage,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1)],1)],1)],1)],1)},o=[],r={name:"AllOrderInfo",data:function(){return{id:this.$route.params.id,order:this.$route.query,paid:this.$route.query.paid,messages:[],message:""}},computed:{user:function(){return this.$store.state.user}},methods:{pay:function(){var e=this;!1===this.paid?this.paid=!0:this.paid=!1,this.axios.patch("https://gp-photolab.herokuapp.com/users/allorder/"+this.order._id,this.$data).then((function(t){t.data.success?console.log(e.$data):e.$swal({icon:"error",title:"發生錯誤",text:t.data.message})})).catch((function(t){e.$swal({icon:"error",title:"發生錯誤",text:t.response.data.message})}))},sendMessage:function(){var e=this;this.axios.post("https://gp-photolab.herokuapp.com/messages/"+this.user.id+"/"+this.id,this.$data).then((function(t){t.data.success&&(e.axios.get("https://gp-photolab.herokuapp.com/messages/"+e.id).then((function(t){t.data.success?e.messages=t.data.result:e.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((function(t){"未登入"===t.response.data.message&&(e.$store.commit("logout"),"/login"!==e.$route.path&&e.$router.push("/login")),e.$swal({icon:"error",title:"錯誤",text:t.response.data.message})})),e.message="")})).catch((function(t){"未登入"===t.response.data.message&&(e.$store.commit("logout"),"/login"!==e.$route.path&&e.$router.push("/login")),e.$swal({icon:"error",title:"錯誤",text:t.response.data.message})})),this.$vuetify.goTo(this.target,this.options)}},updated:function(){var e=document.getElementById("chatRecord");e.scrollTop=e.scrollHeight},mounted:function(){var e=this;this.axios.get("https://gp-photolab.herokuapp.com/users/").then((function(t){t.data.success||e.$swal({icon:"error",title:"錯誤",text:t.data.message})})).catch((function(t){"未登入"===t.response.data.message&&(e.$store.commit("logout"),"/login"!==e.$route.path&&e.$router.push("/login")),e.$swal({icon:"error",title:"錯誤",text:t.response.data.message})})),this.axios.get("https://gp-photolab.herokuapp.com/messages/"+this.id).then((function(t){t.data.success&&(e.messages=t.data.result)})).catch((function(t){"未登入"===t.response.data.message&&(e.$store.commit("logout"),"/login"!==e.$route.path&&e.$router.push("/login"))}))}},i=r,n=s("2877"),c=s("6544"),d=s.n(c),l=s("7496"),u=s("e4e5"),p=s("b0af"),h=s("99d9"),g=s("a722"),m=s("8dd9"),f=s("b73d"),v=s("8654"),x=s("a844"),_=Object(n["a"])(i,a,o,!1,null,null,null);t["default"]=_.exports;d()(_,{VApp:l["a"],VBanner:u["a"],VCard:p["a"],VCardText:h["b"],VLayout:g["a"],VSheet:m["a"],VSwitch:f["a"],VTextField:v["a"],VTextarea:x["a"]})}}]);
//# sourceMappingURL=allOrderInfo.8ed433eb.js.map
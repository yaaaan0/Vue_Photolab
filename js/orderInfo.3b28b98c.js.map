{"version":3,"sources":["webpack:///./src/views/OrderInfo.vue?0051","webpack:///src/views/OrderInfo.vue","webpack:///./src/views/OrderInfo.vue?c8a7","webpack:///./src/views/OrderInfo.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","_s","order","_id","staticClass","date","project","orderDate","photographer","paid","_e","_l","item","index","user_account","includes","message","user_name","on","sendMessage","$event","type","indexOf","_k","keyCode","key","model","value","callback","$$v","expression","staticRenderFns","name","data","id","$route","params","query","messages","computed","user","$store","state","methods","axios","post","updated","ele","scrollTop","scrollHeight","mounted","get","component","VApp","VBanner","VCard","VCardText","VLayout","VSheet","VSwitch","VTextField","VTextarea"],"mappings":"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","file":"js/orderInfo.3b28b98c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"orderInfo\"}},[_c('v-app',[_c('v-card',[_c('v-banner',{attrs:{\"single-line\":\"\",\"color\":\"rgba(75, 69, 60,0.8)\",\"dark\":\"\"}},[_c('caption',[_vm._v(\"訂單編號 ｜ \"+_vm._s(_vm.order._id))])]),_c('v-card-text',{staticClass:\"text-1 grey lighten-4\"},[_c('v-sheet',{staticClass:\"mx-auto\",attrs:{\"max-width\":\"800\",\"height\":\"250\"}},[_c('span',[_vm._v(\"訂單日期 ｜ \"+_vm._s(_vm.order.date))]),_c('span',[_vm._v(\"拍攝項目 ｜ \"+_vm._s(_vm.order.project))]),_c('span',[_vm._v(\"預計拍攝日期 ｜ \"+_vm._s(_vm.order.orderDate))]),_c('span',[_vm._v(\"攝影師 ｜ \"+_vm._s(_vm.order.photographer))]),_c('span',[_c('P',[_vm._v(\"付款狀態 ｜\")]),(_vm.order.paid === false)?_c('v-switch',{attrs:{\"color\":\"rgb(103, 125, 53)\",\"disabled\":\"\",\"inset\":\"\",\"dense\":\"\"}}):_vm._e(),(_vm.order.paid === false)?_c('div',{staticClass:\"caption fail\",attrs:{\"color\":\"#F44336\"}},[_vm._v(\"*尚未付款\")]):_vm._e(),(_vm.order.paid === true)?_c('v-switch',{attrs:{\"color\":\"rgb(103, 125, 53)\",\"input-value\":\"true\",\"disabled\":\"\",\"inset\":\"\",\"dense\":\"\"}}):_vm._e(),(_vm.order.paid === true)?_c('div',{staticClass:\"caption success\"},[_vm._v(\"*付款成功\")]):_vm._e()],1)])],1),_c('v-card-text',{staticClass:\"text-2 grey lighten-4\"},[_c('v-sheet',{staticClass:\"mx-auto x_auto\",attrs:{\"min-height\":\"300\",\"max-width\":\"800\",\"max-height\":\"500px\"}},_vm._l((_vm.messages),function(item,index){return _c('div',[_c('v-layout',{staticClass:\"user\"},[(!item.user_account.includes('##'))?_c('v-textarea',{staticClass:\"msg\",attrs:{\"background-color\":\"rgba(255,255,255,0.4)\",\"filled\":\"\",\"dense\":\"\",\"rounded\":\"\",\"auto-grow\":\"\",\"rows\":\"1\",\"name\":\"input-7-1\",\"append-outer-icon\":\"mdi-account-circle\",\"value\":item.message,\"hint\":item.date,\"suffix\":item.user_name,\"persistent-hint\":\"\",\"readonly\":\"\",\"color\":\"rgb(107 102 96)\"}}):_vm._e(),(item.user_account.includes('##'))?_c('v-textarea',{staticClass:\"msg_web\",attrs:{\"filled\":\"\",\"dense\":\"\",\"rounded\":\"\",\"auto-grow\":\"\",\"rows\":\"1\",\"name\":\"input-7-1\",\"prepend-icon\":\"mdi-account-circle\",\"value\":item.message,\"hint\":item.date,\"prefix\":item.user_name,\"persistent-hint\":\"\",\"readonly\":\"\",\"color\":\"rgb(107 102 96)\"}}):_vm._e()],1)],1)}),0),_c('div',{staticClass:\"mt-10\"},[_c('v-text-field',{staticClass:\"sendMessage\",attrs:{\"label\":\"message\",\"append-outer-icon\":\"mdi-send\",\"filled\":\"\",\"dense\":\"\",\"rounded\":\"\",\"auto-grow\":\"\",\"rows\":\"1\",\"color\":\"#677d35\"},on:{\"click:append-outer\":_vm.sendMessage,\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.sendMessage($event)}},model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n  #orderInfo\n    v-app\n      v-card\n        v-banner(single-line color='rgba(75, 69, 60,0.8)' dark)\n          caption 訂單編號 ｜ {{order._id}}\n        v-card-text.text-1.grey.lighten-4\n          v-sheet.mx-auto(max-width='800' height='250')\n            span 訂單日期 ｜ {{order.date}}\n            span 拍攝項目 ｜ {{order.project}}\n            span 預計拍攝日期 ｜ {{order.orderDate}}\n            span 攝影師 ｜ {{order.photographer}}\n            span\n              P 付款狀態 ｜\n              v-switch(v-if=\"order.paid === false\" color=\"rgb(103, 125, 53)\" disabled inset dense)\n              .caption.fail(v-if=\"order.paid === false\" color=\"#F44336\") *尚未付款\n              v-switch(v-if=\"order.paid === true\" color=\"rgb(103, 125, 53)\" input-value=\"true\" disabled inset dense)\n              .caption.success(v-if=\"order.paid === true\") *付款成功\n        v-card-text.text-2.grey.lighten-4\n          v-sheet.mx-auto.x_auto(min-height='300' max-width='800' max-height='500px')\n            div(v-for='(item, index) in messages')\n              v-layout.user\n                v-textarea.msg(\n                  v-if=\"!item.user_account.includes('##')\"\n                  background-color=\"rgba(255,255,255,0.4)\"\n                  filled\n                  dense\n                  rounded\n                  auto-grow\n                  rows=\"1\"\n                  name=\"input-7-1\"\n                  append-outer-icon=\"mdi-account-circle\"\n                  :value='item.message'\n                  :hint='item.date'\n                  :suffix=\"item.user_name\"\n                  persistent-hint\n                  readonly\n                  color=\"rgb(107 102 96)\"\n                  )\n                v-textarea.msg_web(\n                  v-if=\"item.user_account.includes('##')\"\n                  filled\n                  dense\n                  rounded\n                  auto-grow\n                  rows=\"1\"\n                  name=\"input-7-1\"\n                  prepend-icon=\"mdi-account-circle\"\n                  :value='item.message'\n                  :hint='item.date'\n                  :prefix=\"item.user_name\"\n                  persistent-hint\n                  readonly\n                  color=\"rgb(107 102 96)\"\n                  )\n          div.mt-10\n            v-text-field.sendMessage(\n              v-model=\"message\"\n              label=\"message\"\n              append-outer-icon=\"mdi-send\"\n              @click:append-outer=\"sendMessage\"\n              @keyup.enter=\"sendMessage\"\n              filled\n              dense\n              rounded\n              auto-grow\n              rows=\"1\"\n              color=\"#677d35\")\n\n</template>\n\n<script>\nexport default {\n  name: 'OrderInfo',\n  data () {\n    return {\n      id: this.$route.params.id,\n      order: this.$route.query,\n      messages: [],\n      message: ''\n    }\n  },\n  computed: {\n    user () {\n      return this.$store.state.user\n    }\n  },\n  methods: {\n    sendMessage () {\n      this.axios.post(process.env.VUE_APP_API + '/messages/' + this.user.id + '/' + this.id, this.$data)\n        .then(res => {\n          if (res.data.success) {\n            this.axios.get(process.env.VUE_APP_API + '/messages/' + this.id)\n              .then(res => {\n                if (res.data.success) {\n                  this.messages = res.data.result\n                } else {\n                  this.$swal({\n                    icon: 'error',\n                    title: '錯誤',\n                    text: res.data.message\n                  })\n                }\n              })\n              .catch(err => {\n                if (err.response.data.message === '未登入') {\n                  // 登出\n                  this.$store.commit('logout')\n                  // 導回首頁\n                  if (this.$route.path !== '/login') {\n                    this.$router.push('/login')\n                  }\n                }\n                this.$swal({\n                  icon: 'error',\n                  title: '錯誤',\n                  text: err.response.data.message\n                })\n              })\n            this.message = ''\n          }\n        }).catch(err => {\n          if (err.response.data.message === '未登入') {\n            // 登出\n            this.$store.commit('logout')\n            // 導回首頁\n            if (this.$route.path !== '/login') {\n              this.$router.push('/login')\n            }\n          }\n          this.$swal({\n            icon: 'error',\n            title: '錯誤',\n            text: err.response.data.message\n          })\n        })\n    }\n  },\n  updated () {\n  // 聊天定位到底部\n    const ele = document.getElementById('chatRecord')\n    ele.scrollTop = ele.scrollHeight\n  },\n  mounted () {\n    this.axios.get(process.env.VUE_APP_API + '/messages/' + this.id)\n      .then(res => {\n        if (res.data.success) {\n          this.messages = res.data.result\n        }\n      })\n      .catch(err => {\n        if (err.response.data.message === '未登入') {\n          // 登出\n          this.$store.commit('logout')\n          // 導回首頁\n          if (this.$route.path !== '/login') {\n            this.$router.push('/login')\n          }\n        }\n      })\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OrderInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OrderInfo.vue?vue&type=template&id=2ccb4ab8&lang=pug&\"\nimport script from \"./OrderInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./OrderInfo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBanner } from 'vuetify/lib/components/VBanner';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VSheet } from 'vuetify/lib/components/VSheet';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VApp,VBanner,VCard,VCardText,VLayout,VSheet,VSwitch,VTextField,VTextarea})\n"],"sourceRoot":""}